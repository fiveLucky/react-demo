# ç¬¬äº”æ­¥ï¼šå•ç‹¬æ‰“åŒ…æ ·å¼æ–‡ä»¶ï¼Œä½¿lessæ”¯æŒ css modules ä¸€æ ·çš„å±€éƒ¨ç¯å¢ƒå’Œä½¿ç”¨æ–¹å¼ï¼Œè§£å†³é‡åæ ·å¼è¦†ç›–çš„é—®é¢˜

### èƒŒæ™¯
- ä¸ºä»€ä¹ˆè¦æŠŠæ ·å¼æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Ÿ
    - æ ·å¼æ–‡ä»¶æœ€ç»ˆéƒ½ä¼šå˜æˆ style æ ‡ç­¾æ’åˆ° html çš„ head æ ‡ç­¾é‡Œï¼Œç”±äºä¸šåŠ¡å¼•ç”¨çš„æ ·å¼æ–‡ä»¶å¾ˆå¤šï¼Œæ‰€ä»¥ä¼šç”Ÿæˆå¾ˆå¤šçš„ style æ ‡ç­¾ï¼Œå¯¼è‡´ html æ–‡ä»¶å¾ˆä¹±ï¼Œæœ€ä¸»è¦çš„æ˜¯ ie9 æµè§ˆå™¨å¯¹style æ ‡ç­¾æ•°é‡æœ‰é™åˆ¶ï¼Œæ‰€ä»¥æ ·å¼æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå¾ˆé‡è¦ã€‚
- ä¸ºä»€ä¹ˆè¦æŠŠ less æ¨¡å—åŒ–ï¼Ÿ
    - æˆ‘ä»¬éƒ½çŸ¥é“ css modules æ˜¯ä¸ºäº†è§£å†³æ ·å¼é‡åè¦†ç›–é—®é¢˜çš„ï¼ˆå› ä¸ºæœ€ç»ˆæ ·å¼éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼‰ï¼Œå½“ç„¶ä½¿ç”¨ less ä¹Ÿä¼šå­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼Œä½†æ˜¯ less  åˆä¸æ”¯æŒ modules å±æ€§ï¼Œæ€ä¹ˆè§£å†³ less ç±»é‡åçš„é—®é¢˜å‘¢ï¼Ÿ

ä¸‹é¢å°±æ¥è°ˆä¸€è°ˆè¿™äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼ˆåªæ˜¯ä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½è¿˜æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œå¥ˆä½•æ°´å¹³æœ‰é™ğŸ˜…ï¼‰

#### æ ·å¼æ–‡ä»¶åˆ†ç±»æ‰“åŒ…
- æ’ä»¶ ``` extract-text-webpack-plugin ```ï¼Œ[æ–‡æ¡£](http://webpack.css88.com/plugins/extract-text-webpack-plugin.html)
- è¿™ä¸ªæ’ä»¶æ²¡æœ‰ä»€ä¹ˆå‘ï¼ŒæŒ‰ç…§æ–‡æ¡£é…ç½®æ¥å°±å¯ä»¥äº†

#### åƒä½¿ç”¨ css modules ä¸€æ ·ä½¿ç”¨less
- å…ˆè¯´ä¸€ä¸‹ css modules
    - ä½¿ç”¨æ–¹å¼ï¼š  
      ![image.png](https://upload-images.jianshu.io/upload_images/3504920-449d8297d6675e08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  
    - ç¼–è¯‘ç»“æœï¼š  
      ![image.png](https://upload-images.jianshu.io/upload_images/3504920-74dcb92dab730d9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

    - webpacké…ç½®ï¼š  
    ```
        {
            test: /\.css$/,
            loader: 'style-loader!css-loader?{"modules":true}'
        },
    ```  
- ä½¿ç”¨ less
    - æ­£å¸¸ä½¿ç”¨å§¿åŠ¿ï¼š  
    ![image.png](https://upload-images.jianshu.io/upload_images/3504920-48083a61dc2fc3ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  
      - é—®é¢˜ï¼š  
        ![image.png](https://upload-images.jianshu.io/upload_images/3504920-e7878eb104214aa5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  
      æ–‡ä»¶ç»“æ„ï¼š  
      ![index.js](https://upload-images.jianshu.io/upload_images/3504920-741b82527a08949e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  
ä¸éš¾å‘ç°ï¼ŒList å’Œ Detail ç»„ä»¶éƒ½å¼•ç”¨äº†è‡ªå·±æ¨¡å—çš„ lessæ–‡ä»¶ï¼Œè€Œä¸”ä¸¤ä¸ª less æ–‡ä»¶çš„ç±»åéƒ½æ˜¯  containerï¼Œä½†æ˜¯æ ·å¼ä¸åŒï¼Œæœ€åæ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¯¼è‡´é‡åç±»æ ·å¼è¢«è¦†ç›–ã€‚å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ ¹æ® css modules çš„è¾“å‡ºç»“æœæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¯ç¤ºï¼Œå¯ä»¥å€ŸåŠ© css modules æ¥å®ç°ç”Ÿæˆä¸åŒçš„ç±»åã€‚
   - modules ä½¿ç”¨æ–¹å¼ï¼š  
   ![image.png](https://upload-images.jianshu.io/upload_images/3504920-f4b35070cb746199.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
   - è¾“å‡ºç»“æœï¼š  
    ![image.png](https://upload-images.jianshu.io/upload_images/3504920-b1688373796d7007.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
    å®Œç¾çš„è§£å†³äº†é‡åæ ·å¼è¢«è¦†ç›–çš„é—®é¢˜ï¼
   - webpack é…ç½®  
    ```
    {
        test: /\.less$/,
        use: ExtractTextWebpackPlugin.extract({
            fallback: 'style-loader',
            use: [
                {
                    loader: 'css-loader',
                    options: {
                        modules: true,
                        localIdentName: '[name]_[local]-[hash:base64:5]'
                    }
                },
                {
                    loader: 'less-loader'
                }
            ]
        })
    }
    ```  

  - å®ç°æ€è·¯ï¼šæ‰€æœ‰çš„æ ·å¼æ–‡ä»¶æœ€ç»ˆéƒ½ä¼šè½¬æ¢æˆ css ä»£ç ï¼Œéƒ½éœ€è¦ä½¿ç”¨ css-loader ï¼Œæ‰€ä»¥å°±å¯ä»¥å€ŸåŠ© css-loader çš„ modules é…ç½®å®ç° less çš„ modules ç”¨æ³•ã€‚
  - å­˜åœ¨çš„é—®é¢˜ï¼šå…¬å…±æ ·å¼ä¹Ÿä½¿ç”¨çš„ less ï¼Œè¿™æ ·çš„é…ç½®å²‚ä¸æ˜¯æŠŠå…¬å…±æ ·å¼çš„ç±»åä¹Ÿæ”¹å˜äº†ï¼Œå¯¼è‡´ä¸šåŠ¡æ— æ³•ä½¿ç”¨å…¬å…±æ ·å¼ã€‚
    - è§£å†³æ€è·¯ï¼š
        - 1ã€ä¸šåŠ¡æ ·å¼æ–‡ä»¶å’Œå…¬å…±æ ·å¼æ–‡ä»¶ä½¿ç”¨ä¸åŒçš„å‘½åï¼Œç„¶ååœ¨ ä¸º loader åŒ¹é…æ–‡ä»¶æ—¶ï¼Œåšä¸åŒçš„å¤„ç†ã€‚
        - 2ã€ ä½¿ç”¨ include å’Œ exclude é…ç½®é¡¹å¯¹å…¬å…±æ ·å¼æ–‡ä»¶åŒºåˆ†ï¼Œä»¥å®ç° å…¬å…±æ ·å¼ less ç±»åä¸å¤„ç†